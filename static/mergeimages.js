!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.mergeImages=t()}(this,function(){"use strict";var n={format:"image/png",quality:.92,xx:void 0,yy:void 0,w:void 0,h:void 0,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0};return function(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),new Promise(function(i){var o=(e=Object.assign({},n,e)).Canvas?new e.Canvas:window.document.createElement("canvas"),r=e.Image||window.Image,a=t.map(function(n){return new Promise(function(t,i){"Object"!==n.constructor.name&&(n={src:n});var o=new r;o.crossOrigin=e.crossOrigin,o.onerror=function(){return i(new Error("Couldn't load image"))},o.onload=function(){return t(Object.assign({},n,{img:o}))},o.src=n.src})}),u=o.getContext("2d");i(Promise.all(a).then(function(n){var t=function(t){return e[t]||Math.max.apply(Math,n.map(function(n){return n.img[t]}))};return o.width=t("width"),o.height=t("height"),n.forEach(function(n){return u.globalAlpha=n.opacity?n.opacity:1,u.drawImage(n.img,n.xx,n.yy,n.w,n.h,n.xx||0,n.yy||0,n.w,n.h)}),e.Canvas&&"image/jpeg"===e.format?new Promise(function(n,t){o.toDataURL(e.format,{quality:e.quality,progressive:!1},function(e,i){e?t(e):n(i)})}):o.toDataURL(e.format,e.quality)}))})}});